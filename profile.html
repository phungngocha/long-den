<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang cá nhân</title>
   <link rel="stylesheet" href="style.css">
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">

<!-- Header -->
<div id="header"></div>

<div class="container py-5">
  <div class="card mx-auto shadow" style="max-width: 500px;">
    <div class="card-body text-center" id="profile-info">
      <!-- Thông tin người dùng sẽ được render ở đây -->
    </div>
  </div>
</div>

<script>
 // Nạp header.html vào vị trí #header
fetch("header.html")
  .then(res => res.text())
  .then(data => {
    document.getElementById("header").innerHTML = data;

    // ✅ Sau khi header đã load -> chạy hàm cập nhật người dùng
    handleUserDisplay();

    // ✅ Các hàm cũ vẫn giữ
    if (typeof updateCartCount === "function") updateCartCount();
    if (typeof handleSearch === "function") handleSearch();
  });

  // Lấy thông tin user từ localStorage
  const user = JSON.parse(localStorage.getItem("user"));

  const profileDiv = document.getElementById("profile-info");

  if (user && user.name) {
    profileDiv.innerHTML = `
      <img src="${user.avatar || 'https://cdn-icons-png.flaticon.com/512/219/219983.png'}" 
           class="rounded-circle mb-3 border border-1 border-danger" width="120" height="120" alt="Avatar">
      <h3 class="text-danger fw-bold mb-2">${user.name}</h3>
      <p class="mb-1"><strong>Email:</strong> ${user.email}</p>
      <p class="mb-1"><strong>Số điện thoại:</strong> ${user.phone}</p>
      <p class="mb-1"><strong>Địa chỉ:</strong> ${user.address}</p>
    `;
  } else {
    profileDiv.innerHTML = `
      <p class="text-danger fw-bold">Người dùng chưa đăng nhập.</p>
      <a href="register.html" class="btn btn-danger mt-3">Đăng ký / Đăng nhập</a>
    `;
  }
</script>
 <script src="script.js"></script>
</body>
</html>
